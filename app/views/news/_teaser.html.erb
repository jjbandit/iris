<% background_url = news.image.url(:teaser) %>
<% controller_name == 'home' ? view_width = 'col-md-4' : view_width = 'col-md-12' %>

<div class='news-teaser-wrapper <%= view_width %>' style='background-image:url("<%= background_url %>")' >
	<div class='news-teaser-content'>
		<%# don't preserve :page in url if we're not linking from the news controller %>
		<% if controller_name == 'news' %>
			<h3><%= link_to news.title, news_path(news, anchor: 'news-article', page: params[:page]), class: 'read-more' %> </h3>
		<% else %>
			<h3><%= link_to news.title, news_path(news, anchor: 'news-article'), class: 'read-more' %> </h3>
		<% end %>
		<span> <%= time_ago_in_words(news.created_at) %> ago</span>

		<p>
			<%= truncate(news.body, length: 100, separator: '.') %>
		</p>


		<% if current_user.try(:admin?) %>
			<div>
				<%= link_to 'Edit', edit_news_path(news) %>
				<%= link_to 'Remove', news, method: :delete, data: { confirm: 'Are you sure?' } %>
			</div>
		<% end %>
	</div>
</div>
